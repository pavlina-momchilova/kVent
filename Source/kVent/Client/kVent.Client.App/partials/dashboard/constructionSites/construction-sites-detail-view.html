<div class="row">
    <div class="row">
        <div class="col-lg-12">
            <h1 class="page-header">Детайли за '{{vm.updatedConstructionSite.constructionSiteName}}'</h1>
        </div>
        <!-- /.col-lg-12 -->
    </div>
    <div class="col-lg-12">
        <div class="row">
            <div class="col-xs-12 row text-center">
                <i class="fa fa-building fa-5x huge"></i>
            </div>
        </div>
        <div class="row">
            <form class="form-horizontal" name="editConstructionSitesDetailsForm" novalidate>
                <fieldset>
                    <div class="form-group" show-errors-directive>
                        <div class="col-lg-10 input-group col-lg-offset-1">
                            <span class="input-group-addon"><i class="fa fa-bank"></i></span>
                            <input type="text" ng-model="vm.updatedConstructionSite.constructionSiteName" class="form-control" name="constructionSiteName" id="constructionSiteName" required="required" pattern=".{2,30}" placeholder="Име на строителния обект" autofocus ng-disabled="vm.isNotEditMode">
                        </div>
                    </div>
                    <div class="form-group" show-errors-directive>
                        <div class="col-lg-10 input-group col-lg-offset-1">
                            <span class="input-group-addon"><i class="fa fa-road"></i></span>
                            <input type="text" ng-model="vm.updatedConstructionSite.city" class="form-control" name="city" id="city" pattern=".{2,30}" placeholder="Град" ng-disabled="vm.isNotEditMode">
                        </div>
                    </div>
                    <div class="form-group" show-errors-directive>
                        <div class="col-lg-10 input-group col-lg-offset-1">
                            <span class="input-group-addon"><i class="fa fa-road fa-fw"></i></span>
                            <input type="text" ng-model="vm.updatedConstructionSite.address" class="form-control" name="address" id="address" required="required" pattern=".{2,30}" placeholder="Адрес" ng-disabled="vm.isNotEditMode">
                        </div>
                    </div>
                    <div class="form-group" show-errors-directive>
                        <div class="col-lg-10 input-group col-lg-offset-1">
                            <span class="input-group-addon"><i class="fa fa-user fa-fw"></i></span>
                            <ui-select ng-model="vm.updatedConstructionSite.clientId" ng-required="true" ng-disabled="vm.isNotEditMode">
                                <ui-select-match placeholder="Клиент">
                                    <span ng-bind="$select.selected.companyName"></span>
                                </ui-select-match>
                                <ui-select-choices repeat="client in (vm.clientsArray | filter: $select.search) track by client.id">
                                    <div ng-bind-html="client.companyName | highlight: $select.search"></div>
                                    <small>
                                        Представител:
                                        {{client.firstName}} {{client.lastName}}
                                        Е-мейл: <span ng-bind-html="''+client.email | highlight: $select.search"></span>
                                    </small>
                                </ui-select-choices>
                            </ui-select>
                        </div>
                        <!--<div class="col-lg-10 input-group col-lg-offset-1">
                            <span class="input-group-addon"><i class="fa fa-user fa-fw"></i></span>
                            <input type="text" ng-model="constructionSite.clientId" class="form-control" name="clientId" id="clientId" required="required" pattern=".{2,30}" placeholder="Клиент">
                        </div>-->
                    </div>
                    <div class="form-group" show-errors-directive>
                        <div class="col-lg-10 input-group col-lg-offset-1">
                            <span class="input-group-addon"><i class="fa fa-euro fa-fw"></i></span>
                            <select name="mySelect" id="mySelect" class="form-control"
                                    ng-init="constructionSite.paymentPerHour = vm.paymentOptions[0]"
                                    ng-options="option.name for option in vm.paymentOptions"
                                    ng-model="vm.updatedConstructionSite.paymentPerHour"
                                    ng-disabled="vm.isNotEditMode"></select>
                        </div>
                    </div>
                    <div class="form-group" ng-show="vm.isNotEditMode" ng-hide="!vm.canEdit">
                        <div class="col-lg-10 col-lg-offset-1 top-buffer-pixels">
                            <button ng-click="vm.toggleEditMode()" class="btn btn-outline btn-warning btn-lg btn-block"><i class="fa fa-pencil fa-fw"></i> Редактирай</button>
                        </div>
                        <div class="col-lg-10 col-lg-offset-1 top-buffer-pixels">
                            <button ng-click="vm.deleteConstructionSite()" class="btn btn-outline btn-danger btn-lg btn-block"><i class="fa fa-trash-o fa-lg"></i>  Изтрий</button>
                        </div>
                    </div>
                    <div class="form-group" ng-hide="vm.isNotEditMode">
                        <div class="col-lg-10 col-lg-offset-1 top-buffer-pixels">
                            <button ng-click="vm.editConstructionSite(vm.updatedConstructionSite, editConstructionSitesDetailsForm)" ng-disabled="editConstructionSitesDetailsForm.$invalid" class="btn btn-outline btn-success btn-lg btn-block"><i class="fa fa-check"></i> Запази</button>
                        </div>
                        <div class="col-lg-10 col-lg-offset-1 top-buffer-pixels">
                            <button ng-click="vm.toggleEditMode()" class="btn btn-outline btn-danger btn-lg btn-block"><i class="fa fa-close"></i> Отказ</button>
                        </div>
                    </div>
                </fieldset>
            </form>
        </div>
    </div>
    <div class="row">
        <!-- /.col-lg-12 -->
        <div class="col-lg-12">
            <div class="panel panel-default">
                <div class="panel-heading">
                    Обекти, поръчани от '{{vm.client.companyName}}'.
                </div>
                <!-- /.panel-heading -->
                <div class="panel-body">
                    <div class="table-responsive">
                        <table class="table table-hover">
                            <thead>
                                <tr>
                                    <th>Име на обекта</th>
                                    <th>Адрес</th>
                                    <th> </th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr ng-repeat="constructionSite in vm.client.constructionSites">
                                    <td>{{constructionSite.constructionSiteName}}</td>
                                    <td>{{constructionSite.address}}</td>
                                    <td>
                                        <button type="button" class="btn btn-outline btn-primary btn-xs">Детайли</button>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <!-- /.table-responsive -->
                </div>
                <!-- /.panel-body -->
            </div>
        </div>
    </div>
</div>